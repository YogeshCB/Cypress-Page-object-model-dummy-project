import { h } from 'preact';
import { PrimaryButton, SecondaryButton } from '../../../components/commons/misc';
import styles from 'stylesheets/components/commons/media/folder';
import { Spinner } from "../../../components";
import Field from '../../../components/commons/Field';

export default ({ onConfirmFolder, close, onSave: onConfirmUpdate, onFolderRowChange: onRowChange, onFolderChange, selectedAsset: selected, folder, view = 'tiles', folderUpdateStatus = false }) => {
  const { name = '', description = '', loading } = folder;
  let label = {
    heading: 'Create New Folder',
    button: 'Create',
    func: onConfirmFolder,
    name,
    description,
    onNameChange: (e) => {
      onFolderChange({ ...folder, name: e })
    },
    onDescriptionChange: (e) => {
      onFolderChange({ ...folder, description: e })
    }
  };
  if (folderUpdateStatus) {
    label = {
      heading: 'Rename Folder',
      button: 'Update',
      func: onConfirmUpdate.bind(null, selected.id),
      name: selected.name,
      description: selected.description,
      onNameChange: (e) => {
        onRowChange({ id: selected.id, data: { name: e } });
      },
      onDescriptionChange: (e) => {
        onRowChange({ id: selected.id, data: { description: e } });
      },
    }
  }
  return (
    <div className={styles.newFolderForm}>
      <div className={styles.header}>{label.heading}</div>
      {loading ? <Spinner theme={styles} noOverlay/> :
        <div className={styles.formContainer} style={{ display: 'flex' }}>
          <svg xmlns="http://www.w3.org/2000/svg" width="155" height="101">
            <g fill-rule="evenodd">
              <path
                d="M42.568 99.248c-3.205-.514-41.716-5.143-38.88-39.283s6.393-44.407 21.365-48.164S76.42-9.73 104.98 7.172s59.377 32.06 47.148 59.044-14.232 35.987-46.14 34.6-48.18.867-63.42-1.577"
                fill="#f8f6fe"/>
              <g fill="#fff">
                <path
                  d="M11.9 51.9h54.04a3.57 3.57 0 0 1 3.562 3.557v1.427a3.57 3.57 0 0 1-3.562 3.557H11.9a3.57 3.57 0 0 1-3.562-3.557v-1.427A3.57 3.57 0 0 1 11.89 51.9M7.465 63.4H29.13a3.42 3.42 0 0 1 3.411 3.406 3.42 3.42 0 0 1-3.411 3.406H7.465a3.42 3.42 0 0 1-3.411-3.406A3.42 3.42 0 0 1 7.465 63.4M3.4 42.444h21.667a3.42 3.42 0 0 1 3.411 3.406 3.42 3.42 0 0 1-3.411 3.406H3.4A3.42 3.42 0 0 1 0 45.85a3.42 3.42 0 0 1 3.411-3.406"/>
                <path
                  d="M14.792 48.985c1.056 0 1.913.652 1.913 1.457S15.85 51.9 14.792 51.9h8.345c-1.056 0-1.913-.652-1.913-1.457s.856-1.457 1.913-1.457h-8.345m-2.704 11.362c1.103 0 1.997.68 1.997 1.52s-.894 1.52-1.997 1.52h8.7c-1.103 0-1.997-.68-1.997-1.52s.894-1.52 1.997-1.52h-8.7M136.673 34.6H82.63a3.57 3.57 0 0 1-3.562-3.557v-1.426a3.57 3.57 0 0 1 3.562-3.557h54.042a3.57 3.57 0 0 1 3.561 3.557v1.426a3.57 3.57 0 0 1-3.561 3.557m4.424-11.5H119.43a3.42 3.42 0 0 1-3.41-3.406 3.42 3.42 0 0 1 3.41-3.406h21.666a3.42 3.42 0 0 1 3.412 3.406 3.42 3.42 0 0 1-3.412 3.406m4.054 20.965h-21.666a3.42 3.42 0 0 1-3.412-3.406 3.42 3.42 0 0 1 3.412-3.406h21.666a3.42 3.42 0 0 1 3.41 3.406 3.42 3.42 0 0 1-3.41 3.406"/>
                <path
                  d="M133.77 37.524c-1.056 0-1.912-.652-1.912-1.457s.856-1.457 1.912-1.457h-8.345c1.057 0 1.913.652 1.913 1.457s-.856 1.457-1.913 1.457h8.345m2.703-11.36c-1.103 0-1.997-.68-1.997-1.52s.894-1.52 1.997-1.52h-8.7c1.102 0 1.996.68 1.996 1.52s-.894 1.52-1.996 1.52h8.7M108.395 94.27h-63.7a1.66 1.66 0 0 1-1.662-1.66V51.26a1.66 1.66 0 0 1 1.662-1.66h63.7a1.66 1.66 0 0 1 1.662 1.66V92.6a1.66 1.66 0 0 1-1.662 1.66"/>
              </g>
              <path
                d="M109.65 95.52h-63.7a1.66 1.66 0 0 1-1.662-1.66V52.5a1.66 1.66 0 0 1 1.662-1.66h63.7a1.66 1.66 0 0 1 1.662 1.66v41.35a1.66 1.66 0 0 1-1.662 1.66"
                fill="#faeef4"/>
              <path
                d="M108 94.52H45.1a2.32 2.32 0 0 1-2.318-2.314V51.663a.25.25 0 1 1 .502 0v40.542c0 1 .815 1.814 1.816 1.814H108c1 0 1.816-.814 1.816-1.814V51.663c0-1-.815-1.814-1.816-1.814H73.644a.25.25 0 1 1 0-.501H108a2.32 2.32 0 0 1 2.317 2.314v40.542a2.32 2.32 0 0 1-2.317 2.314"
                fill="#715faa"/>
              <path
                d="M72.098 26.313l-5.627 33.65c-.137.82.42 1.594 1.242 1.732l30.36 5.063a1.51 1.51 0 0 0 1.738-1.235l.877-5.245.458-2.895 5.343-31.956c.137-.82-.42-1.595-1.242-1.732l-23.9-3.984-9.258 6.594-.001.007"
                fill="#fff"/>
              <g fill="#715faa">
                <path
                  d="M72.33 26.45l-5.61 33.555a1.26 1.26 0 0 0 1.036 1.444l30.36 5.063a1.26 1.26 0 0 0 1.449-1.029l.877-5.245.458-2.893 5.344-31.958a1.24 1.24 0 0 0-.218-.934c-.196-.273-.486-.454-.818-.51l-23.788-3.967-9.09 6.473zm25.994 40.58c-.096 0-.194-.008-.292-.024l-30.36-5.063a1.76 1.76 0 0 1-1.448-2.02l5.63-33.662a.25.25 0 0 1 .101-.159l9.258-6.594a.25.25 0 0 1 .187-.043l23.9 3.984a1.75 1.75 0 0 1 1.143.711 1.74 1.74 0 0 1 .304 1.309l-6.678 40.095a1.76 1.76 0 0 1-1.735 1.465z"/>
                <path
                  d="M72.734 26.182l5.8.965a1.32 1.32 0 0 0 1.535-1.096l.967-5.782-8.293 5.912zm6 1.485a1.84 1.84 0 0 1-.303-.025l-6.387-1.065a.25.25 0 0 1-.104-.451l9.278-6.614a.25.25 0 0 1 .393.245l-1.067 6.378a1.84 1.84 0 0 1-1.81 1.532zM92.8 46.25a.38.38 0 0 1-.062-.005l-14-2.333c-.205-.034-.343-.228-.3-.432s.227-.343.433-.3l14 2.333c.205.034.343.228.3.432-.03.184-.2.314-.37.314m4.633 10.14a.26.26 0 0 1-.041-.003l-26.333-4.38a.25.25 0 1 1 .083-.494l26.333 4.392a.25.25 0 0 1-.041.497m.618-3.702a.17.17 0 0 1-.04-.004L71.68 48.312a.25.25 0 1 1 .083-.494L98.096 52.2a.25.25 0 0 1-.041.497m-14.307 5.236a.26.26 0 0 1-.042-.004L70.44 55.717a.25.25 0 0 1 .083-.494l13.266 2.212a.25.25 0 0 1-.041.497m4.998-20.438a8.38 8.38 0 0 1-1.381-.115c-3.323-.554-4.966-2.668-5.034-2.757a.25.25 0 0 1 .399-.303c.015.02 1.6 2.047 4.717 2.567s5.327-1.04 5.35-1.055a.25.25 0 1 1 .294.406c-.082.06-1.776 1.258-4.344 1.258m-6.6-5.647a.79.79 0 0 0-.635-.9.79.79 0 0 0-.9.634c-.08.42.214.82.635.9a.79.79 0 0 0 .9-.635M95.46 34.07a.79.79 0 0 0-.635-.9.79.79 0 0 0-.9.635c-.08.42.214.82.635.9a.79.79 0 0 0 .9-.634m13.94 12.9c-.023 0-.046-.003-.07-.01-5.27-1.502-5.72-5.727-5.592-6.496a.25.25 0 1 1 .495.083c-.007.042-.177 4.4 5.235 5.93a.25.25 0 0 1 .172.31.25.25 0 0 1-.241.182M70.623 35.386c-.016 0-.033-.002-.05-.005-.04-.008-4.2-1.23-6.706-6.443a.25.25 0 1 1 .452-.216c2.138 4.47 5.733 6.044 6.353 6.168a.25.25 0 0 1 .196.295.25.25 0 0 1-.246.201m10.293 32.408c-.014 0-.028-.001-.042-.003a.25.25 0 0 1-.206-.288l.593-3.548a.25.25 0 1 1 .495.083l-.593 3.548a.25.25 0 0 1-.247.209m2.77.46a.25.25 0 0 1-.248-.292l.593-3.548a.25.25 0 1 1 .495.082l-.593 3.548a.25.25 0 0 1-.247.209"/>
              </g>
              <path
                d="M110.057 56.473H78.73a2.07 2.07 0 0 1-1.572-.725l-7.802-9.136a2.07 2.07 0 0 0-1.572-.725H45.1c-1.14 0-2.067.924-2.067 2.064v44.255c0 1.14.925 2.064 2.067 2.064H108c1.14 0 2.067-.924 2.067-2.064V56.473"
                fill="#fff"/>
              <path
                d="M111.31 57.725H79.985A2.07 2.07 0 0 1 78.412 57L70.6 47.864a2.07 2.07 0 0 0-1.572-.725H46.343c-1.14 0-2.067.924-2.067 2.064v44.255c0 1.14.925 2.064 2.067 2.064h62.9c1.14 0 2.067-.924 2.067-2.064V57.725"
                fill="#faeef4"/>
              <g fill="#715faa">
                <path
                  d="M45.1 46.138a1.82 1.82 0 0 0-1.816 1.814v44.255a1.82 1.82 0 0 0 1.816 1.814H108a1.82 1.82 0 0 0 1.816-1.814V56.723H78.73c-.68 0-1.322-.296-1.763-.812l-7.802-9.136c-.345-.405-.85-.637-1.382-.637H45.1zM108 94.52H45.1a2.32 2.32 0 0 1-2.317-2.314V47.95a2.32 2.32 0 0 1 2.317-2.314h22.694c.68 0 1.322.296 1.763.813l7.802 9.136c.346.405.85.637 1.382.637h31.326a.25.25 0 0 1 .251.25v35.733a2.32 2.32 0 0 1-2.317 2.314zm-1.32-9.367a.25.25 0 0 1-.251-.25v-1.23a.25.25 0 1 1 .502 0v1.23a.25.25 0 0 1-.251.25m0 1.94a.25.25 0 0 1-.251-.25v-.75a.25.25 0 1 1 .502 0v.75a.25.25 0 0 1-.251.25m-1.86 5h-1.747a.25.25 0 1 1 0-.501h1.747a1.61 1.61 0 0 0 1.608-1.606V87.97a.25.25 0 1 1 .502 0v2.006a2.11 2.11 0 0 1-2.109 2.107m-3.418 0h-1.87a.25.25 0 1 1 0-.501h1.87a.25.25 0 1 1 0 .501M58.915 65.77c-4.445 0-7.04-2.4-7.147-2.492a.25.25 0 1 1 .344-.365c.025.023 2.566 2.356 6.804 2.356s6.815-2.55 6.84-2.577a.25.25 0 1 1 .357.352c-.1.1-2.746 2.726-7.197 2.726"/>
              </g>
            </g>
            <defs>
              <path id="B"
                    d="M50.848 59.744c0-.567-.46-1.026-1.028-1.026s-1.028.46-1.028 1.026.46 1.026 1.028 1.026 1.028-.46 1.028-1.026"/>
            </defs>
          </svg>
          <div style={{ width: '75%', padding: '2rem' }}>
            <Field onKeyUp={e => {
              const code = e.keyCode ? e.keyCode : e.which
              if (code === 13) {
                label.func();
              } else {
                if (folderUpdateStatus) {
                  onRowChange({ id: selected.id, data: { name: e.target.value } });
                } else {
                  onFolderChange({ ...folder, name: e.target.value })
                }
              }
            }} label="Name" value={label.name} onChange={label.onNameChange}/>
            <div className={styles.buttons}>
              <PrimaryButton className={`${styles.float}`}
                             onClick={label.func}>{label.button}</PrimaryButton>
              <SecondaryButton theme={styles} className={styles.float} onClick={close}>Cancel</SecondaryButton>
            </div>
          </div>
        </div>}
    </div>
  );
};