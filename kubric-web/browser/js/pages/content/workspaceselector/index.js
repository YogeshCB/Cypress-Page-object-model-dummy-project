import { h, Component } from 'preact';
import { PrimaryButton } from '../../../components/commons/misc';
import styles from 'stylesheets/components/workspace';
import SelectBox from '../../../components/commons/SelectBox';
import CreateWorkspace from '../../commons/CreateWorkspace';

export default ({
                  workspaces, setWorkspace, selectedWorkspace, changeWorkspace,
                  message
                }) => {

  const options = workspaces.map((workspace) => {
    return {
      label: workspace.name,
      value: workspace.workspace_id,
      data: workspace.workspace_id
    }
  });

  return (
    <div className={styles.container}>
      <div className={styles.overlay}/>
      <div className={styles.content}>
        <div className={styles.logo}>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 178 30">
            <defs>
              <path id="a" d="M10.73 17h10.132V.267H.596V17H10.73z"/>
              <path id="c" d="M20.862 17.541V.808H.596v16.733h20.266z"/>
            </defs>
            <g fill="none" fill-rule="evenodd">
              <path fill="#FFC700"
                    d="M20.266 0c0 9.242-6.544 16.733-14.616 16.733H0V7.407A7.408 7.408 0 0 1 7.408 0h12.858z"/>
              <path fill="#8453FA"
                    d="M20.266 29.192c0-9.242-6.544-16.733-14.616-16.733H0v9.326a7.408 7.408 0 0 0 7.408 7.407h12.858z"/>
              <g transform="translate(157 12.192)">
                <path fill="#00D6E9"
                      d="M.596 17C.596 7.758 7.14.267 15.212.267h5.65v9.326A7.407 7.407 0 0 1 13.455 17H.596z"
                      mask="url(#b)"/>
              </g>
              <g transform="translate(157 -.808)">
                <path fill="#FF3383"
                      d="M.596.808c0 9.242 6.544 16.733 14.616 16.733h5.65V8.215A7.407 7.407 0 0 0 13.455.808H.596z"
                      mask="url(#d)"/>
              </g>
              <path fill="#211643"
                    d="M30.485 24.99a.699.699 0 0 1-.213-.514V4.746c0-.221.067-.403.198-.545a.689.689 0 0 1 .53-.212h2.728c.222 0 .404.07.546.212a.74.74 0 0 1 .21.545v7.093l6.76-7.304a1.465 1.465 0 0 1 1.182-.546h3.09c.162 0 .309.06.44.182a.591.591 0 0 1 .198.454.5.5 0 0 1-.152.365l-8.243 9.15 8.849 10.033c.08.142.12.273.12.394 0 .182-.06.334-.181.455a.58.58 0 0 1-.424.18H42.94c-.425 0-.727-.085-.91-.257-.182-.171-.282-.267-.303-.287l-7.243-8.001v7.819c0 .202-.07.374-.211.515a.739.739 0 0 1-.546.212H31a.7.7 0 0 1-.516-.212M53.276 23.416c-1.515-1.396-2.273-3.506-2.273-6.335V4.747c0-.223.065-.404.197-.545a.686.686 0 0 1 .53-.213h2.788c.222 0 .404.07.545.213a.735.735 0 0 1 .213.545V17.08c0 1.596.379 2.799 1.137 3.607.757.808 1.833 1.212 3.227 1.212s2.47-.404 3.227-1.212c.759-.808 1.137-2.01 1.137-3.607V4.747c0-.223.07-.404.212-.545a.737.737 0 0 1 .545-.213h2.788c.223 0 .399.07.532.213.13.14.196.322.196.545V17.08c0 2.829-.753 4.94-2.257 6.335-1.506 1.393-3.622 2.09-6.35 2.09-2.748 0-4.878-.697-6.394-2.09M83.914 21.96c1.051 0 1.87-.288 2.455-.863.586-.576.878-1.308.878-2.198 0-.89-.298-1.621-.894-2.197-.595-.575-1.409-.863-2.439-.863h-5v6.12h5zm-.303-9.273c1.031 0 1.824-.252 2.378-.758.557-.505.834-1.181.834-2.03 0-.85-.272-1.505-.817-1.97-.546-.465-1.345-.697-2.395-.697h-4.698v5.455h4.698zM74.852 24.99a.702.702 0 0 1-.212-.515V4.746c0-.222.066-.403.198-.545a.686.686 0 0 1 .53-.212h8.788c2.364 0 4.132.52 5.304 1.56 1.172 1.042 1.758 2.46 1.758 4.259 0 1.05-.257 1.945-.773 2.682-.514.738-1.117 1.267-1.803 1.59.848.385 1.565 1.012 2.152 1.88.585.869.88 1.858.88 2.97 0 1.879-.638 3.395-1.91 4.546-1.274 1.15-3.05 1.727-5.334 1.727h-9.063a.703.703 0 0 1-.515-.212zM105.765 13.747c1.212 0 2.121-.267 2.728-.803.606-.534.909-1.318.909-2.348 0-1.031-.303-1.824-.909-2.38-.607-.555-1.516-.832-2.728-.832h-4.213v6.363h4.213zm-8.273 11.244a.699.699 0 0 1-.213-.515V4.746c0-.222.066-.403.198-.545a.684.684 0 0 1 .529-.212h7.85c2.485 0 4.43.575 5.834 1.727 1.404 1.153 2.106 2.788 2.106 4.909 0 1.476-.354 2.713-1.061 3.714-.707.999-1.697 1.722-2.97 2.167l4.395 7.727c.06.121.09.233.09.334a.593.593 0 0 1-.196.454.63.63 0 0 1-.439.182h-2.788c-.324 0-.577-.075-.758-.227a2.21 2.21 0 0 1-.486-.591l-3.879-7.182h-4.152v7.273c0 .202-.07.374-.211.515a.74.74 0 0 1-.546.212h-2.789a.7.7 0 0 1-.514-.212zM119.735 24.99a.698.698 0 0 1-.212-.514V4.716c0-.222.07-.398.212-.53a.729.729 0 0 1 .516-.197h2.909c.222 0 .398.066.53.198.13.13.197.307.197.53v19.759a.734.734 0 0 1-.196.515.69.69 0 0 1-.531.212h-2.91a.7.7 0 0 1-.515-.212M132.145 23.37c-1.525-1.424-2.34-3.45-2.44-6.077a78.66 78.66 0 0 1-.03-2.666c0-1.253.01-2.162.03-2.728.1-2.586.919-4.601 2.456-6.046 1.535-1.444 3.686-2.167 6.455-2.167 1.798 0 3.364.309 4.697.925 1.334.616 2.369 1.46 3.106 2.53.738 1.07 1.126 2.273 1.166 3.607v.06a.514.514 0 0 1-.196.41.67.67 0 0 1-.44.166h-2.94c-.242 0-.424-.056-.545-.166-.121-.111-.222-.31-.302-.592-.304-1.252-.83-2.136-1.577-2.652-.748-.515-1.737-.773-2.97-.773-2.89 0-4.394 1.618-4.515 4.849-.02.546-.03 1.384-.03 2.517 0 1.13.01 1.99.03 2.575.12 3.233 1.626 4.85 4.516 4.85 1.212 0 2.196-.26 2.955-.774.757-.515 1.287-1.398 1.59-2.651.08-.283.182-.48.303-.592.12-.111.303-.167.545-.167h2.94c.182 0 .339.06.47.183a.507.507 0 0 1 .166.455c-.04 1.333-.428 2.534-1.166 3.606-.737 1.07-1.772 1.914-3.106 2.53-1.333.617-2.9.924-4.697.924-2.788 0-4.946-.712-6.471-2.136"/>
            </g>
          </svg>
        </div>
        {workspaces.length > 0 ? <div>
            <h3 className={styles.header}>{message}</h3>
            <SelectBox label="Click to Select" theme={styles} onChange={changeWorkspace} value={selectedWorkspace}
                       options={options}/>
            <br/>
            <br/>
            <PrimaryButton isDisabled={selectedWorkspace === '' || !selectedWorkspace} className={styles.button}
                           onClick={setWorkspace.bind(null, selectedWorkspace)}>Continue</PrimaryButton></div> :
          <CreateWorkspace newWorkspace='newWorkspace'/>}
      </div>
    </div>)
}
